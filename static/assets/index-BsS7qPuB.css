:root{--bg-main: #f8f5f0;--bg-panel: #ffffff;--bg-input: #f8f5f0;--header-bg: #2d2a26;--text-primary: #2d2a26;--text-muted: #7a756e;--border-color: #e5e0d8;--success-color: #51cf66;--success-bg: #d3f9d8;--suggested-color: #4dabf7;--suggested-bg: #e7f5ff;--warning-color: #ffc107;--warning-bg: #fff3cd;--error-color: #fa5252;--error-bg: #ffe3e3;--accent-1: #c8442e;--accent-2: #7ba3a3;--accent-3: #a67b5b;--accent-4: #d4a574;--accent-5: #2c4a5e;--accent-6: #8b4513;--font-serif: Georgia, "Times New Roman", serif;--font-system: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, sans-serif;--font-mono: "SF Mono", Monaco, "Cascadia Code", monospace;--space-xs: 4px;--space-sm: 8px;--space-md: 16px;--space-lg: 24px;--space-xl: 32px;--side-panel-width: 380px;--header-height: 56px;--border-radius: 4px;--transition-fast: .15s ease}[data-theme=dark]{--bg-main: #1a1a1a;--bg-panel: #252525;--bg-input: #1a1a1a;--header-bg: #0f0f0f;--text-primary: #e8e8e8;--text-muted: #888888;--border-color: #3a3a3a;--success-bg: rgba(81, 207, 102, .15);--suggested-bg: rgba(77, 171, 247, .15);--warning-bg: rgba(255, 193, 7, .15);--error-bg: rgba(250, 82, 82, .15)}*,*:before,*:after{box-sizing:border-box;margin:0;padding:0}html{font-size:14px;-webkit-font-smoothing:antialiased}body{font-family:var(--font-system);font-size:1rem;line-height:1.5;color:var(--text-primary);background-color:var(--bg-main);min-height:100vh}.app-container{display:flex;flex-direction:column;min-height:100vh}.header-bar{height:var(--header-height);background:var(--header-bg);display:flex;align-items:center;justify-content:space-between;padding:0 var(--space-lg);border-bottom:2px solid rgba(0,0,0,.2)}.header-brand{display:flex;align-items:baseline;gap:var(--space-sm)}.header-title{font-family:var(--font-serif);font-size:1.5rem;font-weight:400;color:#fff}.header-subtitle{font-size:.85rem;color:#ffffff80}.header-actions{display:flex;align-items:center;gap:var(--space-md)}.header-btn{padding:var(--space-sm) var(--space-md);font-family:var(--font-system);font-size:.85rem;font-weight:500;border:1px solid rgba(255,255,255,.3);border-radius:var(--border-radius);background:transparent;color:#fff;cursor:pointer;transition:all var(--transition-fast);display:flex;align-items:center;gap:var(--space-xs)}.header-btn:hover{background:#ffffff1a}.header-btn svg{width:16px;height:16px}.theme-toggle{width:36px;height:36px;border-radius:var(--border-radius);border:1px solid rgba(255,255,255,.3);background:transparent;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast)}.theme-toggle:hover{background:#ffffff1a}.theme-toggle svg{width:18px;height:18px}.theme-toggle .icon-moon{display:block}.theme-toggle .icon-sun,[data-theme=dark] .theme-toggle .icon-moon{display:none}[data-theme=dark] .theme-toggle .icon-sun{display:block}.main-layout{display:flex;flex:1;overflow:hidden}.side-panel{width:var(--side-panel-width);background:var(--bg-panel);border-right:2px solid var(--border-color);display:flex;flex-direction:column;overflow:hidden;transition:margin-left var(--transition-fast),width var(--transition-fast)}.side-panel.collapsed{margin-left:calc(-1 * var(--side-panel-width) + 40px)}.tab-nav{display:flex;border-bottom:2px solid var(--border-color)}.tab-btn{flex:1;padding:var(--space-md);font-family:var(--font-system);font-size:.85rem;font-weight:500;text-transform:uppercase;letter-spacing:.05em;background:transparent;border:none;color:var(--text-muted);cursor:pointer;transition:all var(--transition-fast);position:relative}.tab-btn:hover{color:var(--text-primary);background:var(--bg-input)}.tab-btn.active{color:var(--text-primary)}.tab-btn.active:after{content:"";position:absolute;bottom:-2px;left:0;right:0;height:2px;background:var(--accent-2)}.tab-content{flex:1;overflow-y:auto}.tab-pane{display:none}.tab-pane.active{display:block}.source-section{border-bottom:1px solid var(--border-color)}.source-header{padding:var(--space-md) var(--space-lg);display:flex;align-items:center;justify-content:space-between;cursor:pointer;transition:background var(--transition-fast)}.source-header:hover{background:var(--bg-input)}.source-info{display:flex;align-items:center;gap:var(--space-sm)}.source-status{width:8px;height:8px;border-radius:50%;background:var(--success-color)}.source-status.disabled{background:var(--text-muted)}.source-status.empty{background:var(--warning-color)}.source-name{font-weight:500;font-size:.9rem}.source-type{font-size:.75rem;color:var(--text-muted);font-family:var(--font-mono)}.source-meta{font-size:.75rem;color:var(--text-muted)}.source-content{padding:0 var(--space-lg) var(--space-lg);display:none}.source-section.expanded .source-content{display:block}.source-section.expanded .source-header{background:var(--bg-input)}.source-actions{display:flex;gap:var(--space-sm);align-items:center;margin-top:var(--space-sm);flex-wrap:wrap}.save-btn,.reset-btn{padding:var(--space-sm) var(--space-md);font-size:.8rem;border-radius:var(--border-radius);cursor:pointer;transition:all .15s ease;position:relative;overflow:hidden}.save-btn{background:var(--accent-2);color:#fff;border:none;box-shadow:0 2px 4px #0000001a}.save-btn:hover{transform:translateY(-1px);box-shadow:0 4px 8px #00000026;filter:brightness(1.1)}.save-btn:active{transform:translateY(1px) scale(.98);box-shadow:0 1px 2px #0000001a}.save-btn:disabled,.reset-btn:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.save-btn.loading,.reset-btn.loading{color:transparent;pointer-events:none}.save-btn.loading:after,.reset-btn.loading:after{content:"";position:absolute;width:14px;height:14px;top:50%;left:50%;margin-left:-7px;margin-top:-7px;border:2px solid currentColor;border-radius:50%;border-top-color:transparent;animation:btn-spin .6s linear infinite}.save-btn.loading:after{border-color:#ffffff4d;border-top-color:#fff}@keyframes btn-spin{to{transform:rotate(360deg)}}.reset-btn{background:transparent;border:1px solid var(--border-color);color:var(--text-muted)}.reset-btn:hover{border-color:var(--error-color);color:var(--error-color);background:#ef44440d;transform:translateY(-1px)}.reset-btn:active{transform:translateY(1px) scale(.98);background:#ef44441a}.reset-btn.loading:after{border-color:#ef44444d;border-top-color:var(--error-color)}.save-status{font-size:.8rem;color:var(--success-color)}.taste-textarea{width:100%;min-height:100px;padding:var(--space-sm);font-family:var(--font-system);font-size:.85rem;line-height:1.5;color:var(--text-primary);background:var(--bg-input);border:1px solid var(--border-color);border-radius:var(--border-radius);resize:vertical}.taste-textarea:focus{outline:none;border-color:var(--accent-2)}.learning-list{display:flex;flex-direction:column;gap:var(--space-sm)}.learning-item{padding:var(--space-sm) var(--space-md);background:var(--bg-input);border-radius:var(--border-radius);border-left:3px solid var(--accent-2);font-size:.85rem;display:flex;align-items:flex-start;justify-content:space-between;gap:var(--space-sm)}.learning-item.like{border-left-color:var(--success-color)}.learning-item.dislike{border-left-color:var(--error-color)}.learning-text{flex:1}.learning-tag{font-size:.65rem;font-weight:600;text-transform:uppercase;letter-spacing:.03em;color:var(--text-muted);display:block;margin-bottom:2px}.learning-text strong{display:block;margin-bottom:4px}.learning-text p{margin:0;color:var(--text-muted);font-size:.8rem}.learning-actions{display:flex;gap:2px;opacity:0;transition:opacity var(--transition-fast)}.learning-item:hover .learning-actions{opacity:1}.learning-actions button{width:20px;height:20px;border:none;background:transparent;color:var(--text-muted);cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:2px}.learning-actions button:hover{background:var(--border-color);color:var(--text-primary)}.learning-actions button.delete:hover{background:var(--error-bg);color:var(--error-color)}.history-list{display:flex;flex-direction:column;gap:var(--space-xs);max-height:200px;overflow-y:auto}.history-item{padding:var(--space-xs) var(--space-sm);background:var(--bg-input);border-radius:var(--border-radius);font-size:.8rem;display:flex;align-items:center;justify-content:space-between;gap:var(--space-sm)}.history-item-content{display:flex;align-items:center;gap:var(--space-sm);flex:1;min-width:0}.history-icon{color:var(--success-color)}.history-title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.history-delete{width:18px;height:18px;border:none;background:transparent;color:var(--text-muted);cursor:pointer;opacity:0;transition:opacity var(--transition-fast);display:flex;align-items:center;justify-content:center}.history-item:hover .history-delete{opacity:1}.history-delete:hover{color:var(--error-color)}.preferences-tabs{display:flex;gap:var(--space-xs);margin-bottom:var(--space-sm)}.pref-tab{flex:1;padding:var(--space-xs) var(--space-sm);font-size:.75rem;font-weight:500;background:transparent;border:1px solid var(--border-color);border-radius:var(--border-radius);color:var(--text-muted);cursor:pointer;transition:all var(--transition-fast)}.pref-tab:hover{border-color:var(--text-primary);color:var(--text-primary)}.pref-tab.active{background:var(--bg-input);border-color:var(--accent-2);color:var(--text-primary)}.preferences-list{display:flex;flex-direction:column;gap:var(--space-xs);max-height:200px;overflow-y:auto}.pref-item{display:flex;align-items:center;justify-content:space-between;padding:var(--space-xs) var(--space-sm);background:var(--bg-input);border-radius:var(--border-radius);font-size:.8rem}.pref-title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}.pref-link{color:var(--text-muted);text-decoration:none;font-size:.9rem;padding:0 var(--space-xs)}.pref-link:hover{color:var(--accent-2)}.empty-state{padding:var(--space-md);text-align:center;color:var(--text-muted);font-size:.85rem}.settings-section{padding:var(--space-lg);border-bottom:1px solid var(--border-color)}.settings-section:last-child{border-bottom:none}.section-title{font-size:.75rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;color:var(--text-muted);margin-bottom:var(--space-md)}.setting-row{margin-bottom:var(--space-md)}.setting-row:last-child{margin-bottom:0}.setting-label{display:flex;align-items:center;justify-content:space-between;font-size:.85rem;font-weight:500;margin-bottom:var(--space-xs)}.setting-label .hint{font-weight:400;color:var(--text-muted);font-size:.75rem}.setting-label .restart-hint{color:var(--warning-color, #f59e0b);font-style:italic}.setting-select,.setting-input{width:100%;padding:var(--space-sm);font-family:var(--font-system);font-size:.85rem;color:var(--text-primary);background:var(--bg-input);border:1px solid var(--border-color);border-radius:var(--border-radius)}.setting-select:focus,.setting-input:focus{outline:none;border-color:var(--accent-2)}.setting-slider-row{display:flex;align-items:center;gap:var(--space-md)}.setting-slider{flex:1;height:4px;border-radius:2px;background:var(--border-color);-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer}.setting-slider::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;appearance:none;width:16px;height:16px;border-radius:50%;background:var(--accent-2);cursor:pointer}.slider-value{font-size:.85rem;font-weight:500;min-width:24px;text-align:right}.toggle-row{display:flex;align-items:center;justify-content:space-between;padding:var(--space-sm) 0;border-bottom:1px solid var(--border-color)}.toggle-row:last-child{border-bottom:none}.toggle-label{font-size:.85rem}.toggle-label .desc{display:block;font-size:.75rem;color:var(--text-muted);margin-top:2px}.mini-toggle{position:relative;width:32px;height:18px;background:var(--border-color);border-radius:9px;cursor:pointer;transition:background var(--transition-fast)}.mini-toggle.active{background:var(--success-color)}.mini-toggle:after{content:"";position:absolute;top:2px;left:2px;width:14px;height:14px;background:#fff;border-radius:50%;transition:left var(--transition-fast)}.mini-toggle.active:after{left:16px}.center-panel{flex:1;display:flex;flex-direction:column;overflow-y:auto;padding:var(--space-lg)}.center-header{display:flex;flex-direction:column;gap:var(--space-md);margin-bottom:var(--space-lg)}.header-controls{display:flex;align-items:center;justify-content:space-between}.directives-row{display:flex;align-items:stretch}.directives-input{flex:1;padding:var(--space-md) var(--space-lg);font-family:var(--font-system);font-size:1rem;color:var(--text-primary);background:var(--bg-panel);border:1px solid var(--border-color);border-right:none;border-radius:var(--border-radius) 0 0 var(--border-radius);min-height:50px;transition:all var(--transition-fast)}.directives-input:focus{outline:none;border-color:var(--accent-2);z-index:1}.directives-input::placeholder{color:var(--text-muted)}.directives-input:focus+.round-btn{border-color:var(--accent-2);border-left-color:var(--header-bg)}.round-btn{display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);font-family:var(--font-system);font-size:.9rem;font-weight:500;background:var(--header-bg);color:#fff;border:1px solid var(--header-bg);border-radius:0 var(--border-radius) var(--border-radius) 0;cursor:pointer;white-space:nowrap;transition:all var(--transition-fast)}.round-btn:hover{filter:brightness(1.1)}.round-btn:disabled{opacity:.5;cursor:not-allowed}.round-btn svg{width:16px;height:16px}.filter-row{margin-bottom:var(--space-lg)}.content-filter{width:300px;padding:var(--space-sm) var(--space-md);font-family:var(--font-system);font-size:.9rem;color:var(--text-primary);background:var(--bg-panel);border:1px solid var(--border-color);border-left:3px solid var(--accent-2);border-radius:var(--border-radius);transition:all var(--transition-fast)}.content-filter:focus{outline:none;border-color:var(--accent-2);border-left-width:3px}.content-filter::placeholder{color:var(--text-muted)}.stats-bar{display:flex;align-items:center;gap:var(--space-lg);font-size:.85rem;color:var(--text-muted)}.stat{display:flex;align-items:center;gap:var(--space-xs)}.stat.liked{color:var(--success-color)}.stat.disliked{color:var(--error-color)}.stat-icon{width:16px;height:16px;flex-shrink:0}.tab-icon{width:14px;height:14px;margin-right:4px;vertical-align:-2px}.history-thumb{width:14px;height:14px}.history-icon.disliked{color:var(--error-color)}.search-history{display:none;margin-bottom:var(--space-md);background:var(--bg-panel);border:1px solid var(--border-color);border-radius:var(--border-radius);overflow:hidden}.search-history.visible{display:block}.search-history-header{display:flex;align-items:center;gap:var(--space-md);padding:var(--space-sm) var(--space-md);background:var(--bg-input);cursor:pointer;font-size:.85rem;transition:background var(--transition-fast)}.search-history-header:hover{background:var(--border-color)}.search-count{color:var(--text-muted);font-size:.75rem}.expand-icon{margin-left:auto;color:var(--text-muted);font-size:.7rem}.search-history-content{max-height:0;overflow:hidden;transition:max-height var(--transition-fast)}.search-history-content.expanded{max-height:200px;overflow-y:auto;padding:var(--space-sm);border-top:1px solid var(--border-color)}.search-item{display:flex;gap:var(--space-sm);padding:var(--space-xs) 0;font-size:.8rem;border-bottom:1px solid var(--border-color)}.search-item:last-child{border-bottom:none}.search-tool{font-weight:500;color:var(--accent-2);min-width:80px;font-family:var(--font-mono);font-size:.7rem}.search-query{color:var(--text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}.discovery-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:var(--space-lg)}.discovery-card{background:var(--bg-panel);border:1px solid var(--border-color);border-radius:var(--border-radius);overflow:hidden;position:relative;transition:box-shadow var(--transition-fast)}.discovery-card:hover{box-shadow:0 4px 16px #00000014}[data-theme=dark] .discovery-card:hover{box-shadow:0 4px 16px #0000004d}.discovery-card.card-1{border-left:3px solid var(--accent-1)}.discovery-card.card-2{border-left:3px solid var(--accent-2)}.discovery-card.card-3{border-left:3px solid var(--accent-3)}.discovery-card.card-4{border-left:3px solid var(--accent-4)}.discovery-card.card-5{border-left:3px solid var(--accent-5)}.discovery-card.card-6{border-left:3px solid var(--accent-6)}.discovery-card.new-batch{background:linear-gradient(135deg,var(--bg-panel) 0%,rgba(123,163,163,.1) 100%);box-shadow:0 0 0 1px var(--accent-2),0 2px 8px #7ba3a326}[data-theme=dark] .discovery-card.new-batch{background:linear-gradient(135deg,var(--bg-panel) 0%,rgba(123,163,163,.08) 100%);box-shadow:0 0 0 1px #7ba3a366,0 2px 8px #7ba3a31a}.card-feedback{position:absolute;top:var(--space-sm);right:var(--space-sm);display:flex;gap:2px}.card-feedback.star-rating{gap:2px;align-items:center}.star-rating .star{cursor:pointer;color:var(--text-muted);opacity:.4;transition:all var(--transition-fast);display:inline-flex;padding:2px}.star-rating .star:hover{opacity:1}.star-rating .star.filled{color:#f1c40f;opacity:1}.star-rating .star.preview{color:#f1c40f;opacity:.7}.star-rating .star svg{width:18px;height:18px}.feedback-btn{width:28px;height:28px;border:1px solid var(--border-color);border-radius:var(--border-radius);background:var(--bg-panel);color:var(--text-muted);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all var(--transition-fast)}.feedback-btn:hover{border-color:var(--text-primary);color:var(--text-primary)}.feedback-btn.like:hover,.feedback-btn.like.active{border-color:var(--success-color);color:var(--success-color);background:var(--success-bg)}.feedback-btn.dislike:hover,.feedback-btn.dislike.active{border-color:var(--error-color);color:var(--error-color);background:var(--error-bg)}.feedback-btn svg{width:14px;height:14px}.card-body{padding:var(--space-md);padding-top:calc(var(--space-md) + 36px)}.card-tags{display:flex;flex-wrap:wrap;gap:var(--space-xs);margin-bottom:var(--space-sm)}.card-tag{font-size:.65rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;padding:2px var(--space-sm);border-radius:2px}.card-tag.approach{background:var(--suggested-bg);color:var(--suggested-color)}.card-tag.media{background:var(--bg-input);color:var(--text-muted);border:1px solid var(--border-color)}.card-title{font-family:var(--font-serif);font-size:1.05rem;font-weight:400;line-height:1.35;color:var(--text-primary);margin-bottom:var(--space-sm)}.card-title a{color:inherit;text-decoration:none}.card-title a:hover{text-decoration:underline}.card-url{display:block;font-size:.75rem;color:var(--text-muted);text-decoration:none;margin-bottom:var(--space-xs);opacity:.7}.card-url:hover{opacity:1;text-decoration:underline}.card-meta{font-size:.8rem;color:var(--text-muted);margin-bottom:var(--space-sm)}.card-meta span:after{content:" Â· "}.card-meta span:last-child:after{content:""}.card-description{font-size:.85rem;line-height:1.6;color:var(--text-primary)}.loading-hint{position:fixed;bottom:var(--space-lg);left:50%;transform:translate(-50%);padding:var(--space-md) var(--space-xl);background:var(--header-bg);color:#ffffffe6;font-size:.85rem;border-radius:var(--border-radius);display:none;z-index:100;text-align:center;min-width:280px}.loading-hint.visible{display:flex;flex-direction:column;align-items:center;gap:var(--space-sm)}.loading-spinner{width:20px;height:20px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:spin .8s linear infinite}.loading-text{font-weight:500}.loading-details{font-size:.75rem;opacity:.8}.toggle-btn{margin-left:auto;padding:var(--space-xs) var(--space-sm)!important;background:transparent!important;color:var(--text-muted)!important;border:none!important}.toggle-btn:hover{color:var(--text-primary)!important}.toggle-btn svg{width:16px;height:16px}.pairings-section{margin-bottom:var(--space-lg);padding-bottom:var(--space-lg);border-bottom:1px solid var(--border-color)}.pairings-title{font-family:var(--font-serif);font-size:1.3rem;font-weight:400;color:var(--text-primary);margin-bottom:var(--space-lg)}.pairings-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:var(--space-md)}.pairing-card{display:flex;gap:var(--space-md);padding:var(--space-md);background:var(--bg-panel);border:1px solid var(--border-color);border-radius:var(--border-radius);border-left:3px solid var(--accent-2)}.pairing-music{border-left-color:#1db954}.pairing-exercise{border-left-color:#ff6b6b}.pairing-food{border-left-color:#ffa726}.pairing-tip{border-left-color:#42a5f5}.pairing-quote{border-left-color:#ab47bc}.pairing-icon{font-size:1.5rem;line-height:1;display:flex;align-items:center;justify-content:center;min-width:32px}.pairing-icon-svg{width:24px;height:24px;stroke:currentColor;stroke-width:1.5;fill:none}.pairing-icon-emoji{font-size:1.5rem}.pairing-body{flex:1}.pairing-type{font-size:.7rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;color:var(--text-muted);display:block;margin-bottom:var(--space-xs)}.pairing-content{font-size:.9rem;line-height:1.5;color:var(--text-primary);margin:0}.pairing-link{display:inline-block;margin-top:var(--space-sm);font-size:.85rem;color:var(--accent-2);text-decoration:none}.pairing-link:hover{text-decoration:underline}.pairing-card.new-pairing{animation:pairingFadeIn .5s ease-out;box-shadow:0 0 0 2px var(--accent-2),0 2px 8px #7ba3a333}@keyframes pairingFadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.batch-divider{grid-column:1 / -1;display:flex;align-items:center;gap:var(--space-md);padding:var(--space-md) 0;border-bottom:1px solid var(--border-color);margin-bottom:var(--space-sm)}.batch-title{font-family:var(--font-serif);font-weight:500;font-size:1.1rem;color:var(--text-primary)}.batch-time{color:var(--text-muted);font-size:.8rem;margin-left:auto}.batch-container{display:flex;flex-direction:column;gap:var(--space-md);margin-bottom:var(--space-xl);padding-bottom:var(--space-lg);border-bottom:1px solid var(--border-color)}.batch-container:last-child{border-bottom:none}.batch-container.new-batch{animation:batchFadeIn .4s ease-out}@keyframes batchFadeIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.batch-header{display:flex;align-items:center;gap:var(--space-md);padding:var(--space-sm) 0}.batch-pairings{display:flex;gap:var(--space-md);overflow-x:auto;padding:var(--space-sm) 0;scrollbar-width:thin}.batch-pairings::-webkit-scrollbar{height:6px}.batch-pairings::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.batch-pairings .pairing-card{flex:0 0 auto;min-width:280px;max-width:320px}.batch-cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:var(--space-md)}@media (max-width: 1100px){.side-panel{position:fixed;left:0;top:var(--header-height);bottom:0;z-index:100;transform:translate(-100%);transition:transform var(--transition-fast)}.side-panel:not(.collapsed){transform:translate(0);box-shadow:4px 0 24px #0000001a}.center-panel{margin-left:0}}@media (max-width: 600px){.discovery-grid{grid-template-columns:1fr}.center-header{flex-direction:column;gap:var(--space-md)}}:root{--column-width: 340px;--column-gap: 20px;--card-gap: 12px;--gen-0: #51cf66;--gen-1: #4dabf7;--gen-2: #9775fa;--gen-3: #f06595;--gen-4: #ff922b;--gen-5: #fcc419}.canvas-view{display:flex;flex-direction:column;flex:1;overflow:hidden;position:relative}.canvas-view.compact .card-description{display:none}.canvas-view.compact .canvas-card:hover .card-description{display:block}.canvas-controls{display:flex;align-items:center;justify-content:space-between;padding:var(--space-sm) var(--space-lg);background:var(--bg-panel);border-bottom:1px solid var(--border-color);gap:var(--space-lg);flex-shrink:0}.canvas-stats{display:flex;gap:var(--space-lg)}.canvas-stats .stat{display:flex;align-items:center;gap:var(--space-xs);font-size:.85rem;color:var(--text-muted)}.canvas-stats .stat-value{font-weight:600;color:var(--text-primary)}.grow-count-control{display:flex;align-items:center;gap:var(--space-sm);font-size:.85rem;color:var(--text-muted)}.grow-count-control input[type=range]{width:80px;cursor:pointer}.grow-count-value{font-weight:600;color:var(--text-primary);min-width:20px;text-align:center}.canvas-toggles{display:flex;gap:var(--space-sm)}.toggle-btn{display:flex;align-items:center;gap:var(--space-xs);padding:var(--space-xs) var(--space-sm);font-size:.8rem;font-weight:500;border:1px solid var(--border-color);border-radius:var(--border-radius);background:var(--bg-panel);color:var(--text-muted);cursor:pointer;transition:all var(--transition-fast)}.toggle-btn:hover{border-color:var(--text-primary);color:var(--text-primary)}.toggle-btn.active{background:var(--header-bg);border-color:var(--header-bg);color:#fff}.focus-overlay{position:absolute;top:0;right:0;bottom:0;left:0;background:#0000004d;z-index:5;opacity:0;pointer-events:none;transition:opacity .3s ease}.focus-overlay.active{opacity:1}[data-theme=dark] .focus-overlay{background:#00000080}.columns-container{flex:1;display:flex;gap:var(--column-gap);padding:var(--space-lg);overflow-x:auto;overflow-y:hidden;position:relative;scroll-behavior:smooth}.columns-container::-webkit-scrollbar{height:8px}.columns-container::-webkit-scrollbar-track{background:var(--bg-main)}.columns-container::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:4px}.columns-container::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}.canvas-column{flex-shrink:0;width:var(--column-width);display:flex;flex-direction:column;background:var(--bg-panel);border:1px solid var(--border-color);border-radius:var(--border-radius);overflow:hidden;position:relative;z-index:10}.column-header{padding:var(--space-md) var(--space-lg);display:flex;align-items:center;justify-content:space-between;background:var(--bg-input);border-bottom:1px solid var(--border-color)}.column-info{display:flex;align-items:center;gap:var(--space-sm)}.column-gen-dot{width:8px;height:8px;border-radius:50%}.column-name{font-weight:500;font-size:.9rem}.column-type{font-size:.75rem;color:var(--text-muted);font-family:var(--font-mono)}.column-count{font-size:.75rem;color:var(--text-muted)}.column-cards{flex:1;overflow-y:auto;padding:var(--space-md);display:flex;flex-direction:column;gap:var(--card-gap)}.column-cards::-webkit-scrollbar{width:6px}.column-cards::-webkit-scrollbar-track{background:transparent}.column-cards::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:3px}.canvas-card{background:var(--bg-panel);border:1px solid var(--border-color);border-radius:var(--border-radius);overflow:visible;position:relative;transition:all var(--transition-fast);cursor:pointer}.canvas-card:hover{box-shadow:0 4px 16px #00000014}[data-theme=dark] .canvas-card:hover{box-shadow:0 4px 16px #0000004d}.canvas-card.selected{border-color:var(--accent-2);box-shadow:0 0 0 2px #7ba3a34d}.canvas-card.highlighted{border-color:var(--accent-1);background:linear-gradient(135deg,var(--bg-panel) 0%,rgba(200,68,46,.05) 100%);z-index:15}.canvas-card.dimmed{opacity:.25}.canvas-card.new{animation:cardAppear .35s ease}@keyframes cardAppear{0%{opacity:0;transform:translate(-16px)}to{opacity:1;transform:translate(0)}}.card-gen-bar{position:absolute;left:0;top:0;bottom:0;width:3px}.canvas-card .card-body{padding:var(--space-md)}.canvas-card .card-feedback{position:absolute;top:var(--space-sm);right:var(--space-sm);z-index:5}.canvas-card .card-tags{display:flex;flex-wrap:wrap;gap:var(--space-xs);margin-bottom:var(--space-sm)}.canvas-card .card-tag{font-size:.65rem;font-weight:600;text-transform:uppercase;letter-spacing:.05em;padding:2px var(--space-sm);border-radius:2px;background:var(--bg-input);color:var(--text-muted);border:1px solid var(--border-color)}.canvas-card .card-title{font-family:var(--font-serif);font-size:1rem;font-weight:400;line-height:1.35;color:var(--text-primary);margin-bottom:var(--space-sm)}.canvas-card .card-title a{color:inherit;text-decoration:none}.canvas-card .card-title a:hover{text-decoration:underline}.canvas-card .card-description{font-size:.8rem;line-height:1.5;color:var(--text-muted);display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.canvas-card .card-actions{display:flex;flex-wrap:wrap;gap:var(--space-xs);padding:var(--space-sm) var(--space-md);border-top:1px solid var(--border-color);background:var(--bg-input)}.canvas-card .action-btn{padding:var(--space-xs) var(--space-sm);font-size:.7rem;font-weight:500;border:1px solid var(--border-color);border-radius:var(--border-radius);background:var(--bg-panel);color:var(--text-muted);cursor:pointer;display:flex;align-items:center;gap:4px;transition:all var(--transition-fast)}.canvas-card .action-btn:hover{border-color:var(--text-primary);color:var(--text-primary)}.canvas-card .action-btn:disabled{opacity:.4;cursor:not-allowed}.canvas-card .action-btn.primary{background:var(--accent-2);border-color:var(--accent-2);color:#fff}.canvas-card .action-btn.primary:hover{filter:brightness(1.1)}.canvas-card .branch-btn{flex-shrink:0}.canvas-card .grow-buttons{display:flex;gap:var(--space-xs);flex:1}.canvas-card .grow-count{font-size:.7rem;color:var(--text-muted);display:flex;align-items:center}.canvas-card .child-badge{position:absolute;right:-8px;top:50%;transform:translateY(-50%);width:20px;height:20px;border-radius:50%;background:var(--bg-panel);border:2px solid;display:flex;align-items:center;justify-content:center;font-size:.65rem;font-weight:600;color:var(--text-muted)}.connections-overlay{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:8;overflow:visible}.connection-line{transition:all var(--transition-fast)}.connection-line.highlighted{stroke-width:2}.connection-line.dimmed{opacity:.1!important}.canvas-empty{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--space-xl);text-align:center;color:var(--text-muted);width:100%;height:100%}.canvas-empty .empty-icon{font-size:3rem;margin-bottom:var(--space-md)}.canvas-empty .empty-title{font-family:var(--font-serif);font-size:1.5rem;color:var(--text-primary);margin-bottom:var(--space-sm)}.canvas-empty .empty-desc{font-size:.9rem;max-width:300px}.canvas-loading{position:absolute;bottom:var(--space-lg);right:var(--space-lg);display:flex;align-items:center;gap:var(--space-sm);padding:var(--space-sm) var(--space-md);background:var(--bg-panel);border:1px solid var(--border-color);border-radius:var(--border-radius);box-shadow:0 4px 16px #0000001a;z-index:100}.loading-spinner{width:16px;height:16px;border:2px solid var(--border-color);border-top-color:var(--accent-2);border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.loading-status{font-size:.8rem;color:var(--text-muted)}.view-toggle{display:flex;gap:2px;background:var(--bg-input);border-radius:var(--border-radius);padding:2px}.view-toggle button{display:flex;align-items:center;gap:var(--space-xs);padding:var(--space-xs) var(--space-sm);font-size:.8rem;font-weight:500;border:none;border-radius:calc(var(--border-radius) - 2px);background:transparent;color:var(--text-muted);cursor:pointer;transition:all var(--transition-fast)}.view-toggle button:hover{color:var(--text-primary)}.view-toggle button.active{background:var(--bg-panel);color:var(--text-primary);box-shadow:0 1px 3px #0000001a}.view-toggle svg{width:14px;height:14px}
